<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Tag: OpenFOAM-v9 - Yuxiang&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Yuxiang&#039;s blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Yuxiang&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Yuxiang&#039;s blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Yuxiang&#039;s blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Yuxiang Zhang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Yuxiang's blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Yuxiang Zhang"},"publisher":{"@type":"Organization","name":"Yuxiang's blog","logo":{"@type":"ImageObject","url":{"text":"Yblog"}}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Yblog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/noahFoam"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">OpenFOAM-v9</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-12-19T00:00:00.000Z" title="19/12/2021, 00:00:00">2021-12-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-01-06T00:09:26.101Z" title="6/1/2022, 00:09:26">2022-01-06</time></span><span class="level-item"><a class="link-muted" href="/categories/OpenFOAM-101/">OpenFOAM-101</a></span><span class="level-item">4 minutes read (About 540 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/19/openfoam-v9-installation-server/">How to Compile OpenFOAM-v9 on Linux-based HPC Server</a></h1><div class="content"><p>A warm welcome to my blog!<br>I hope this post can be helpful to your research.</p>
<h2 id="A-brief-introduction"><a href="#A-brief-introduction" class="headerlink" title="A brief introduction"></a>A brief introduction</h2><p>In this post, we will walk through the procedures of compiling/installing OpenFOAM-v9 on your Linux-based High Performance Computing (HPC) server. Here, I use my case as an example to showcase the general method. Please note that you still need to modify a bit based on your server environment.</p>
<h3 id="1-Downloading-the-source-code"><a href="#1-Downloading-the-source-code" class="headerlink" title="1) Downloading the source code"></a>1) Downloading the source code</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~ //go to your home directory</span><br><span class="line">$ mkdir OpenFOAM</span><br><span class="line">$ <span class="built_in">cd</span> OpenFOAM</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/OpenFOAM/OpenFOAM-9.git</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/OpenFOAM/ThirdParty-9.git</span><br></pre></td></tr></table></figure>
<h3 id="2-Loading-the-compiling-environment"><a href="#2-Loading-the-compiling-environment" class="headerlink" title="2) Loading the compiling environment"></a>2) Loading the compiling environment</h3><p>This step depends on your server. However, the most important dependencies for OpenFOAM are: gcc, mpi, boost, and sometimes cmake.<br>Here is a list of module I will load for my case:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ module load gcc/8.2.0</span><br><span class="line">$ module load boost/gcc/1.68.0</span><br><span class="line">$ module load openmpi/gcc/4.0.2</span><br></pre></td></tr></table></figure>
<p>If you happen to have a scotch module pre-compiled on your server, please do load it and you don’t need to compile it in the next step. But you need to add the module load command for scotch into your alias in Step 5.</p>
<h3 id="3-Compiling-third-party-utilities"><a href="#3-Compiling-third-party-utilities" class="headerlink" title="3) Compiling third-party utilities"></a>3) Compiling third-party utilities</h3><p>This step is probably the most essential to the success.<br>We firstly need to download some key packages to the ThirdParty-9/ directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/OpenFOAM/ThirdParty-9</span><br><span class="line">$ wget https://cmake.org/files/v3.9/cmake-3.9.0-Linux-x86_64.tar.gz</span><br><span class="line">$ tar xvzf cmake-3.9.0-rc2-Linux-x86_64.tar.gz cmake-3.9.0</span><br><span class="line">$ wget http://134.100.28.207/files/src/cgal/CGAL-5.0.2.tar.gz</span><br><span class="line">$ tar xvzf CGAL-5.0.2.tar.gz CGAL-5.0.2</span><br><span class="line">$ wget https://src.fedoraproject.org/lookaside/pkgs/metis/metis-5.1.0.tar.gz/</span><br><span class="line">$ tar xvzf metis-5.1.0.tar.gz metis-5.1.0</span><br><span class="line">$ wget https://src.fedoraproject.org/lookaside/extras/scotch/scotch_6.0.9.tar.gz/</span><br><span class="line">$ tar xvzf scotch_6.0.9.tar.gz scotch_6.0.9</span><br></pre></td></tr></table></figure>
<p>Now, we have all the necessary packages in the ThirdParty-9/ directory, we can just compile them:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./Allwmake</span><br></pre></td></tr></table></figure>
<h3 id="4-Compiling-OpenFOAM"><a href="#4-Compiling-OpenFOAM" class="headerlink" title="4) Compiling OpenFOAM"></a>4) Compiling OpenFOAM</h3><p>This step is pretty straightforward. Just to make sure you are in the OpenFOAM-9/ directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/OpenFOAM/OpenFOAM-9</span><br></pre></td></tr></table></figure>
<p>and then type in:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./Allwmake -j <span class="variable">$Number</span> of Cores</span><br></pre></td></tr></table></figure>
<p>and change $Number of Cores to a number that your head machine allows. For my case, I normally use 8 cores on my head machine, which takes around 20 minutes to compile the whole OpenFOAM library.</p>
<h3 id="5-Setting-up-an-alias"><a href="#5-Setting-up-an-alias" class="headerlink" title="5) Setting up an alias"></a>5) Setting up an alias</h3><p>After compiling OpenFOAM, you might want to set up an alias so that you don’t need to manually load the modules and source the bashrc file.<br>For example, you can choose to use echo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;alias of9=&#x27;module load gcc/8.2.0&amp;&amp;module load boost/gcc/1.68.0&amp;&amp;module load openmpi/gcc/4.0.2&amp;&amp;source <span class="variable">$HOME</span>/OpenFOAM/OpenFOAM-9/etc/bashrc WM_LABEL_SIZE=64&#x27;&quot;</span> &gt;&gt;<span class="variable">$HOME</span>/.bashrc</span><br></pre></td></tr></table></figure>
<p>or, you can go to your $HOME directory and modify the .bashrc file manually using vim, nano, emacs or whatever text editor you prefer.</p>
<h4 id="Note"><a href="#Note" class="headerlink" title="Note:"></a>Note:</h4><ol>
<li>You will mostly likely to have different versions of gcc and mpi on your server, and so you need to change a bit from my command line.</li>
<li>If you are using openmpi instead of intel-mpi, be sure to load gcc before loading your mpi, otherwise you will very likely to have errors related to sharing libraries.</li>
<li>Remember, after updating the .bashrc file, you will need to refresh the bash environment by typing:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bash</span><br></pre></td></tr></table></figure></li>
</ol>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Yuxiang Zhang / 张宇翔"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Yuxiang Zhang / 张宇翔</p><p class="is-size-6 is-block">PhD candidate | MEng | BEng</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Dublin, Ireland</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">4</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/noahFoam" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/yuxiangzhangucd/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/YuxiangZhangUCD"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="ResearchGate" href="https://www.researchgate.net/profile/Yuxiang-Zhang-7"><i class="fab fa-researchgate"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/noahFoam"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Zhihu" href="https://www.zhihu.com/people/a-nuo-zhang-46"><i class="fab fa-zhihu"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.cfd-online.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CFD online</span></span><span class="level-right"><span class="level-item tag">www.cfd-online.com</span></span></a></li><li><a class="level is-mobile" href="https://turbmodels.larc.nasa.gov/index.html" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Turbulence models</span></span><span class="level-right"><span class="level-item tag">turbmodels.larc.nasa.gov</span></span></a></li><li><a class="level is-mobile" href="https://www.hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Yblog is powered by</span></span><span class="level-right"><span class="level-item tag">www.hexo.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/OpenFOAM-101/"><span class="level-start"><span class="level-item">OpenFOAM-101</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/ParaView-101/"><span class="level-start"><span class="level-item">ParaView-101</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-05T23:16:45.437Z">2022-01-05</time></p><p class="title"><a href="/2022/01/05/marpi/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-19T00:00:00.000Z">2021-12-19</time></p><p class="title"><a href="/2021/12/19/openfoam-v9-installation-server/">How to Compile OpenFOAM-v9 on Linux-based HPC Server</a></p><p class="categories"><a href="/categories/OpenFOAM-101/">OpenFOAM-101</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-19T00:00:00.000Z">2021-12-19</time></p><p class="title"><a href="/2021/12/19/paraview-on-server/">How to use ParaView on HPC Server</a></p><p class="categories"><a href="/categories/ParaView-101/">ParaView-101</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/HPC/"><span class="tag">HPC</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenFOAM-v9/"><span class="tag">OpenFOAM-v9</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Paraview/"><span class="tag">Paraview</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Yblog</a><p class="is-size-7"><span>&copy; 2022 Yuxiang Zhang</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/noahFoam"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>